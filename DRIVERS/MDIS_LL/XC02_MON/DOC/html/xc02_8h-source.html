<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>MEN - XC2 (DC1 carrier board) board controller driver - xc02.h Source File</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Language" content="en, english">
<meta name="Copyright" content="All material copyright MEN Mikro Elektronik GmbH">
<link href="men_stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class="left_to_right" style="padding-top: 6px; background-color: #F0F0F0; height: 110px; border-bottom: 2px solid #D1D1D2;">
	<!-- Titel -->
	<img src="menlogo.gif" alt="MEN" style="float: left; height: 103px; width: 155px; margin: 0px;"></a>
	<h1 style="margin: 0px; padding-top: 35px; padding-bottom: 0px;">XC2 (DC1 carrier board) board controller driver &nbsp; </h1>
	<h3>xc02.h Source File</h3>
</div>

<div class="left_to_right">
<!-- Hauptteil -->
	<div class="main">
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>xc02.h</h1><a href="xc02_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/***********************  I n c l u d e  -  F i l e  ************************/</span>
00013 <span class="comment">/*-------------------------------[ History ]---------------------------------</span>
00014 <span class="comment"> *</span>
00015 <span class="comment"> * $Log: xc02_8h-source.html,v $
00015 <span class="comment"> * Revision 1.19  2011/08/22 18:19:15  ts
00015 <span class="comment"> * (AUTOCI) Checkin due to new revision 1.11 of fileset ART/13XC02-06/13XC02-06
00015 <span class="comment"> *</span>
00016 <span class="comment"> * Revision 3.14  2011/08/05 16:43:02  ts</span>
00017 <span class="comment"> * R: threshold value for temperature was too wide (ca. 10 degree)</span>
00018 <span class="comment"> * M: reduced value TEMP_THRESH to 0x03 instead 0x08 (=4-5 degree)</span>
00019 <span class="comment"> *</span>
00020 <span class="comment"> * Revision 3.13  2011/04/26 20:08:56  ts</span>
00021 <span class="comment"> * R: unnecessary warning about Temp. tresh. was shown</span>
00022 <span class="comment"> * M: removed warning</span>
00023 <span class="comment"> *</span>
00024 <span class="comment"> * Revision 3.12  2011/04/07 17:50:27  ts</span>
00025 <span class="comment"> * R: 1) temp hysteresis showed to be too small in climate chamber</span>
00026 <span class="comment"> *    2) commands KEY_CTRL and USER_LED were not official yet</span>
00027 <span class="comment"> * M: 1) set TEMP_TRESH to 8 to allow about 10 degree hysteresis</span>
00028 <span class="comment"> *    2) included defines to header file</span>
00029 <span class="comment"> *</span>
00030 <span class="comment"> * Revision 3.11  2010/10/08 18:17:16  ts</span>
00031 <span class="comment"> * R: customer needed access to raw ADC value from photo sensor</span>
00032 <span class="comment"> * M: added RAW register 0x35</span>
00033 <span class="comment"> *</span>
00034 <span class="comment"> * Revision 3.10  2010/05/20 16:07:06  ts</span>
00035 <span class="comment"> * R: new board SC21 is available, new Variants for different displays</span>
00036 <span class="comment"> * M: added commands for current measurement and auto brightness direction</span>
00037 <span class="comment"> *</span>
00038 <span class="comment"> * Revision 3.9  2009/07/17 18:04:05  ts</span>
00039 <span class="comment"> * R: only primary display was on after power up</span>
00040 <span class="comment"> * M: changed define XC02_DEFAULT_DISP_STAT to 0x3</span>
00041 <span class="comment"> *</span>
00042 <span class="comment"> * Revision 3.8  2009/05/11 19:28:30  ts</span>
00043 <span class="comment"> * R: 1) auto brightness too low in indoor environments</span>
00044 <span class="comment"> *    2) ONACK feature was removed but customer demanded</span>
00045 <span class="comment"> * M: 1) added commands to let user set offset and multiplier values</span>
00046 <span class="comment"> *       for fotodiode ADC Value</span>
00047 <span class="comment"> *</span>
00048 <span class="comment"> * Revision 3.7  2009/03/24 16:47:10  ts</span>
00049 <span class="comment"> * R: 1) initial brightness of both displays shall be user controlled</span>
00050 <span class="comment"> * M: 1) additional SMB commands added</span>
00051 <span class="comment"> *</span>
00052 <span class="comment"> * Revision 3.6  2009/01/20 18:18:19  ts</span>
00053 <span class="comment"> * R: new revision R01 of XC2 with PIC16F917 and 2nd display support</span>
00054 <span class="comment"> * M: added SMB commands for mini PCIe card power and 2nd display brightness</span>
00055 <span class="comment"> *</span>
00056 <span class="comment"> * Revision 3.5  2008/12/08 11:20:04  ts</span>
00057 <span class="comment"> * R: define for max. ONACK errors was still present, cosmetics</span>
00058 <span class="comment"> *</span>
00059 <span class="comment"> * Revision 3.4  2008/10/17 11:40:44  ts</span>
00060 <span class="comment"> * R: Not possible for MDIS driver to check if display is in protect state</span>
00061 <span class="comment"> * M: added bit1 to STATUS read command to signal normal(0) or protect state (1)</span>
00062 <span class="comment"> *</span>
00063 <span class="comment"> * Revision 3.3  2008/10/15 18:34:12  ts</span>
00064 <span class="comment"> * R: unnecessary defines for SMB ON acknowledge were still present</span>
00065 <span class="comment"> * M: removed defines</span>
00066 <span class="comment"> *</span>
00067 <span class="comment"> * Revision 3.2  2008/09/16 13:29:08  ts</span>
00068 <span class="comment"> * R: 1.defines were still derived from AD78 firmware</span>
00069 <span class="comment"> *    2.unnecessary macros for temp/voltage conversion</span>
00070 <span class="comment"> * M: 1.all defines changed to prefix XC02C_</span>
00071 <span class="comment"> *    2.moved all conversions to xc02_drv.h (done at CPU side). The PIC itself</span>
00072 <span class="comment"> *    does only pass/receive raw ADC data for temp and voltage.</span>
00073 <span class="comment"> *</span>
00074 <span class="comment"> * Revision 3.1  2008/09/05 17:55:42  ts</span>
00075 <span class="comment"> * Initial Revision in MDIS conform directory</span>
00076 <span class="comment"> *</span>
00077 <span class="comment"> *---------------------------------------------------------------------------</span>
00078 <span class="comment"> * (c) Copyright 2006 by MEN Mikro Elektronik GmbH, Nuremberg, Germany </span>
00079 <span class="comment"> ****************************************************************************/</span>
00080 
00081 <span class="preprocessor">#ifndef _XC02_H</span>
00082 <span class="preprocessor"></span><span class="preprocessor">#define _XC02_H</span>
00083 <span class="preprocessor"></span>
00084 <span class="preprocessor">#ifdef __cplusplus</span>
00085 <span class="preprocessor"></span>    <span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
00086 <span class="preprocessor">#endif</span>
00087 <span class="preprocessor"></span>
00088 
00089 <span class="comment">/*--------------------------------------+</span>
00090 <span class="comment">|   DEFINES                             |</span>
00091 <span class="comment">+--------------------------------------*/</span>
00092 
<a name="l00095"></a><a class="code" href="group____XC02.html#a0">00095</a> <span class="preprocessor">#define XC02C_FLAG          0x01    </span>
<a name="l00097"></a><a class="code" href="group____XC02.html#a1">00097</a> <span class="preprocessor">#define XC02C_WOT_L         0x00    </span>
<a name="l00098"></a><a class="code" href="group____XC02.html#a2">00098</a> <span class="preprocessor">#define XC02C_WOT_H         0x01    </span>
<a name="l00099"></a><a class="code" href="group____XC02.html#a3">00099</a> <span class="preprocessor">#define XC02C_ONACK         0x02    </span>
<a name="l00100"></a><a class="code" href="group____XC02.html#a4">00100</a> <span class="preprocessor">#define XC02C_ONACK_TOUT    0x03    </span>
<a name="l00101"></a><a class="code" href="group____XC02.html#a5">00101</a> <span class="preprocessor">#define XC02C_ONACK_ERR     0x04    </span>
<a name="l00103"></a><a class="code" href="group____XC02.html#a6">00103</a> <span class="preprocessor">#define XC02C_WDOG_STATE    0x05    </span>
<a name="l00104"></a><a class="code" href="group____XC02.html#a7">00104</a> <span class="preprocessor"># define XC02C_WDOG_OFF     0x00    </span>
<a name="l00105"></a><a class="code" href="group____XC02.html#a8">00105</a> <span class="preprocessor"># define XC02C_WDOG_ON      0x01    </span>
<a name="l00107"></a><a class="code" href="group____XC02.html#a9">00107</a> <span class="preprocessor">#define XC02C_WDOG_TRIG     0x06    </span>
<a name="l00108"></a><a class="code" href="group____XC02.html#a10">00108</a> <span class="preprocessor">#define XC02C_WDOG_TOUT     0x07    </span>
<a name="l00110"></a><a class="code" href="group____XC02.html#a11">00110</a> <span class="preprocessor"># define XC02C_WDOG_TOUT_MINMODE    0x01    </span>
<a name="l00111"></a><a class="code" href="group____XC02.html#a12">00111</a> <span class="preprocessor"># define XC02C_WDOG_TOUT_MAXMODE    0xff    </span>
<a name="l00113"></a><a class="code" href="group____XC02.html#a13">00113</a> <span class="preprocessor">#define XC02C_WDOG_ERR      0x08    </span>
<a name="l00114"></a><a class="code" href="group____XC02.html#a14">00114</a> <span class="preprocessor">#define XC02C_SWOFF         0x09    </span>
<a name="l00115"></a><a class="code" href="group____XC02.html#a15">00115</a> <span class="preprocessor">#define XC02C_OFFACK        0x0a    </span>
<a name="l00116"></a><a class="code" href="group____XC02.html#a16">00116</a> <span class="preprocessor">#define XC02C_DOWN_DELAY    0x0b    </span>
<a name="l00117"></a><a class="code" href="group____XC02.html#a17">00117</a> <span class="preprocessor">#define XC02C_OFF_DELAY     0x0c    </span>
<a name="l00119"></a><a class="code" href="group____XC02.html#a18">00119</a> <span class="preprocessor">#define XC02C_STATUS        0x0d    </span>
<a name="l00120"></a><a class="code" href="group____XC02.html#a19">00120</a> <span class="preprocessor"># define XC02C_STATUS_DOWN_EVT  0x01    </span>
<a name="l00121"></a><a class="code" href="group____XC02.html#a20">00121</a> <span class="preprocessor"># define XC02C_STATUS_PROTECT   0x02    </span>
<a name="l00123"></a><a class="code" href="group____XC02.html#a21">00123</a> <span class="preprocessor">#define XC02C_IN            0x0e    </span>
<a name="l00125"></a><a class="code" href="group____XC02.html#a22">00125</a> <span class="preprocessor">#define XC02C_TEMP          0x12    </span>
<a name="l00127"></a><a class="code" href="group____XC02.html#a23">00127</a> <span class="preprocessor">#define XC02C_TEMP_HIGH     0x13    </span>
<a name="l00129"></a><a class="code" href="group____XC02.html#a24">00129</a> <span class="preprocessor">#define XC02C_VOLT          0x14    </span>
<a name="l00131"></a><a class="code" href="group____XC02.html#a25">00131</a> <span class="preprocessor">#define XC02C_SET_BR        0x17    </span>
<a name="l00132"></a><a class="code" href="group____XC02.html#a26">00132</a> <span class="preprocessor">#define XC02C_TEMP_LOW      0x18    </span>
<a name="l00134"></a><a class="code" href="group____XC02.html#a27">00134</a> <span class="preprocessor">#define XC02C_BR_SRC        0x19    </span>
<a name="l00135"></a><a class="code" href="group____XC02.html#a28">00135</a> <span class="preprocessor">#define XC02C_SW_DISP       0x20    </span>
<a name="l00137"></a><a class="code" href="group____XC02.html#a29">00137</a> <span class="preprocessor">#define XC02C_VOLT_HIGH     0x21    </span>
<a name="l00138"></a><a class="code" href="group____XC02.html#a30">00138</a> <span class="preprocessor">#define XC02C_VOLT_LOW      0x22    </span>
<a name="l00139"></a><a class="code" href="group____XC02.html#a31">00139</a> <span class="preprocessor">#define XC02C_INIT_DS       0x25    </span>
<a name="l00140"></a><a class="code" href="group____XC02.html#a32">00140</a> <span class="preprocessor">#define XC02C_TIMESTAMP     0x2a    </span>
00142 <span class="preprocessor"></span><span class="comment">/* R01 specific defines */</span>
<a name="l00143"></a><a class="code" href="group____XC02.html#a33">00143</a> <span class="preprocessor">#define XC02C_SW_MINICARD   0x2b    </span>
<a name="l00144"></a><a class="code" href="group____XC02.html#a34">00144</a> <span class="preprocessor">#define XC02C_SET_BR_2      0x2c    </span>
<a name="l00146"></a><a class="code" href="group____XC02.html#a35">00146</a> <span class="preprocessor">#define XC02C_INIT_BR1      0x2d    </span>
<a name="l00147"></a><a class="code" href="group____XC02.html#a36">00147</a> <span class="preprocessor">#define XC02C_INIT_BR2      0x2e    </span>
<a name="l00149"></a><a class="code" href="group____XC02.html#a37">00149</a> <span class="preprocessor">#define XC02C_AUTO_BR_FAK   0x30    </span>
<a name="l00150"></a><a class="code" href="group____XC02.html#a38">00150</a> <span class="preprocessor">#define XC02C_AUTO_BR_OFFS  0x31    </span>
00152 <span class="preprocessor"></span><span class="comment">/* SC21-xx specific defines */</span>
<a name="l00153"></a><a class="code" href="group____XC02.html#a39">00153</a> <span class="preprocessor">#define SC21C_BL_CURR       0x32    </span>
<a name="l00154"></a><a class="code" href="group____XC02.html#a40">00154</a> <span class="preprocessor">#define SC21C_BR_DIR        0x33    </span>
<a name="l00155"></a><a class="code" href="group____XC02.html#a41">00155</a> <span class="preprocessor">#define SC21C_BR_RAW        0x34    </span>
00157 <span class="preprocessor"></span><span class="comment">/* new SC21R01 functions */</span>
<a name="l00158"></a><a class="code" href="group____XC02.html#a42">00158</a> <span class="preprocessor">#define SC21C_USER_LED      0x35    </span>
<a name="l00159"></a><a class="code" href="group____XC02.html#a43">00159</a> <span class="preprocessor">#define SC21C_KEY_CTRL      0x36    </span>
<a name="l00162"></a><a class="code" href="group____XC02.html#a44">00162</a> <span class="preprocessor">#define XC02C_TEST1_NOTEST  0x00    </span>
<a name="l00163"></a><a class="code" href="group____XC02.html#a45">00163</a> <span class="preprocessor">#define XC02C_TEST1_TMODE1  0x61    </span>
<a name="l00167"></a><a class="code" href="group____XC02.html#a46">00167</a> <span class="preprocessor">#define XC02C_TEST1         0x77    </span>
<a name="l00168"></a><a class="code" href="group____XC02.html#a47">00168</a> <span class="preprocessor">#define XC02C_TEST2         0x78    </span>
<a name="l00169"></a><a class="code" href="group____XC02.html#a48">00169</a> <span class="preprocessor">#define XC02C_TEST2_RST     0x01    </span>
<a name="l00170"></a><a class="code" href="group____XC02.html#a49">00170</a> <span class="preprocessor">#define XC02C_TEST2_SWON    0x02    </span>
<a name="l00172"></a><a class="code" href="group____XC02.html#a50">00172</a> <span class="preprocessor">#define XC02C_TEST3         0x79    </span>
<a name="l00173"></a><a class="code" href="group____XC02.html#a51">00173</a> <span class="preprocessor"># define XC02C_TEST3_PWR    0x01    </span>
<a name="l00175"></a><a class="code" href="group____XC02.html#a52">00175</a> <span class="preprocessor">#define XC02C_TEST4         0x7a    </span>
<a name="l00177"></a><a class="code" href="group____XC02.html#a53">00177</a> <span class="preprocessor">#define XC02C_ID            0xfe    </span>
<a name="l00178"></a><a class="code" href="group____XC02.html#a54">00178</a> <span class="preprocessor">#define XC02C_REV           0xff    </span>
<a name="l00180"></a><a class="code" href="group____XC02.html#a55">00180</a> <span class="preprocessor">#define XC02_FIRMWARE_ID    0xc2</span>
00181 <span class="preprocessor"></span>
00182 
<a name="l00192"></a><a class="code" href="group____XC02__DOWN__DELAY.html#a0">00192</a> <span class="preprocessor">#   define XC02C_DOWN_DELAY_MIN( mode )     ((mode) ? (1&lt;&lt;((mode)-1)) : 0)</span>
00193 <span class="preprocessor"></span>
<a name="l00194"></a><a class="code" href="group____XC02__DOWN__DELAY.html#a1">00194</a> <span class="preprocessor">#   define XC02C_DOWN_DELAY_MINMODE     0</span>
<a name="l00195"></a><a class="code" href="group____XC02__DOWN__DELAY.html#a2">00195</a> <span class="preprocessor"></span><span class="preprocessor">#   define XC02C_DOWN_DELAY_MAXMODE     7</span>
00196 <span class="preprocessor"></span>
<a name="l00198"></a><a class="code" href="group____XC02.html#a56">00198</a> <span class="preprocessor">#define XC02_SMB_HIGH_LIMIT_ON_ACK     0x0b </span>
<a name="l00199"></a><a class="code" href="group____XC02.html#a57">00199</a> <span class="preprocessor">#define XC02_SMB_HIGH_LIMIT_DOWN_DELAY 0x07 </span>
<a name="l00200"></a><a class="code" href="group____XC02.html#a58">00200</a> <span class="preprocessor">#define XC02_SMB_HIGH_LIMIT_OFF_DELAY  0x05 </span>
<a name="l00211"></a><a class="code" href="group____XC02__OFF__DELAY.html#a0">00211</a> <span class="preprocessor">#   define XC02C_OFF_DELAY_MIN( mode )      ((mode) ? (1&lt;&lt;((mode)-1)) : 0)</span>
00212 <span class="preprocessor"></span>
<a name="l00213"></a><a class="code" href="group____XC02__OFF__DELAY.html#a1">00213</a> <span class="preprocessor">#   define XC02C_OD_MINMODE 0</span>
<a name="l00214"></a><a class="code" href="group____XC02__OFF__DELAY.html#a2">00214</a> <span class="preprocessor"></span><span class="preprocessor">#   define XC02C_OD_MAXMODE 5</span>
00215 <span class="preprocessor"></span>
<a name="l00218"></a><a class="code" href="group____XC02.html#a59">00218</a> <span class="preprocessor">#define XC02C_ON_ACK_MAX_ERR   5  </span>
<a name="l00221"></a><a class="code" href="group____XC02.html#a60">00221</a> <span class="preprocessor">#define XC02C_WDOG_MAX_ERR     5  </span>
<a name="l00224"></a><a class="code" href="group____XC02.html#a61">00224</a> <span class="preprocessor">#define XC02C_WAIT_OFF      1000 </span>
<a name="l00232"></a><a class="code" href="group__XC02__DEFAULTS.html#a0">00232</a> <span class="preprocessor">#define XC02_DEFAULT_NOM_TEMP   0x30 </span>
<a name="l00233"></a><a class="code" href="group__XC02__DEFAULTS.html#a1">00233</a> <span class="preprocessor">#define XC02_DEFAULT_BCON_SRC   0x00 </span>
<a name="l00234"></a><a class="code" href="group__XC02__DEFAULTS.html#a2">00234</a> <span class="preprocessor">#define XC02_DEFAULT_DISP_STAT  0x03 </span>
<a name="l00235"></a><a class="code" href="group__XC02__DEFAULTS.html#a3">00235</a> <span class="preprocessor">#define XC02_DEFAULT_PWM        0x80 </span>
<a name="l00236"></a><a class="code" href="group__XC02__DEFAULTS.html#a4">00236</a> <span class="preprocessor">#define XC02_DEFAULT_BRIGHTNESS 0x64 </span>
<a name="l00238"></a><a class="code" href="group__XC02__DEFAULTS.html#a5">00238</a> <span class="preprocessor">#define VOLT_TRESH              0x02  </span>
<a name="l00239"></a><a class="code" href="group__XC02__DEFAULTS.html#a6">00239</a> <span class="preprocessor">#define TEMP_TRESH              0x03  </span>
<a name="l00243"></a><a class="code" href="group__XC02__DEFAULTS.html#a7">00243</a> <span class="preprocessor">#define XC02C_TEMP_MIN  (TEMP_TRESH+1)</span>
<a name="l00244"></a><a class="code" href="group__XC02__DEFAULTS.html#a8">00244</a> <span class="preprocessor"></span><span class="preprocessor">#define XC02C_TEMP_MAX  (0xff-TEMP_TRESH)</span>
<a name="l00245"></a><a class="code" href="group__XC02__DEFAULTS.html#a9">00245</a> <span class="preprocessor"></span><span class="preprocessor">#define XC02C_VOLT_MIN  (VOLT_TRESH+1)</span>
<a name="l00246"></a><a class="code" href="group__XC02__DEFAULTS.html#a10">00246</a> <span class="preprocessor"></span><span class="preprocessor">#define XC02C_VOLT_MAX  (0xff-VOLT_TRESH)</span>
00247 <span class="preprocessor"></span>
00250 <span class="comment">/*--------------------------------------*/</span>
00251 <span class="comment">/*  TYPEDEFS                            */</span>
00252 <span class="comment">/*--------------------------------------*/</span>
00253 
<a name="l00255"></a><a class="code" href="group____XC02.html#a62">00255</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
00256     <a class="code" href="group____XC02.html#a62a79">SM_STATE_OFF</a>,       
00257     <a class="code" href="group____XC02.html#a62a80">SM_STATE_WAIT_SOA</a>,  
00258     <a class="code" href="group____XC02.html#a62a81">SM_STATE_ON</a>,        
00259     <a class="code" href="group____XC02.html#a62a82">SM_STATE_WAIT_SD</a>,   
00260     <a class="code" href="group____XC02.html#a62a83">SM_STATE_WAIT_OD</a>,   
00261     <a class="code" href="group____XC02.html#a62a84">SM_STATE_WAIT_OFF</a>,  
00262     <a class="code" href="group____XC02.html#a62a85">SM_STATE_ERROR_OFF</a>, 
00263     <a class="code" href="group____XC02.html#a62a86">SM_STATE_DISP_PROT</a>  
00264 } <a class="code" href="group____XC02.html#a62">XC02C_SM_STATES</a>;
00265 
00268 <span class="preprocessor">#ifdef __cplusplus</span>
00269 <span class="preprocessor"></span>    }
00270 <span class="preprocessor">#endif</span>
00271 <span class="preprocessor"></span>
00272 <span class="preprocessor">#endif  </span><span class="comment">/* _XC02_H */</span>
</pre></div>
	</div>
</div>

<div class="footer">
<!-- Footer -->
	<p class="footer">
	Generated for XC2 (DC1 carrier board) board controller driver using <a href="http://www.doxygen.org">doxygen</a>.<br>
	Copyright &copy; 2010 <a href="http://www.men.de">MEN Mikro Elektronik GmbH</a>. All Rights Reserved.
	</p>
</div>

</body>
</html>

