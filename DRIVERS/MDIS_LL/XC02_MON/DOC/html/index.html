<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>MEN - XC2 (DC1 carrier board) board controller driver - Main Page</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Language" content="en, english">
<meta name="Copyright" content="All material copyright MEN Mikro Elektronik GmbH">
<link href="men_stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class="left_to_right" style="padding-top: 6px; background-color: #F0F0F0; height: 110px; border-bottom: 2px solid #D1D1D2;">
	<!-- Titel -->
	<img src="menlogo.gif" alt="MEN" style="float: left; height: 103px; width: 155px; margin: 0px;">
	<h1 style="margin: 0px; padding-top: 35px; padding-bottom: 0px;">XC2 (DC1 carrier board) board controller driver &nbsp; </h1>
	<h3>Main Page</h3>
</div>

<div class="left_to_right">
<!-- Hauptteil -->
	<div class="main">
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindexHL" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>XC2 (DC1 carrier board) board controller driver Documentation</h1>
<p>
This is the documentation of the MDIS5 XC2 board controller driver that supports the features that are specific to the XC2 carrier board inside the DC1 display computer. It allows controlling the integrated TFT panel with various SetStat codes.<p>
The driver supports the following HW features:<br>
<ul>
<li>onboard CPU independent system watchdog for additional security</li><li>panel protection and brightness control settings</li><li>reading the 4 GPIO pins which allow encoding e.g. a geographical address</li><li>programmable shutdown delay and startup times <br>
</li></ul>
<p>
Notes:<br>
<ul>
<li>The driver supports the standard watchdog functionality as provided by other MEN boards, e.g. 08AD78.</li><li>MDIS5 32bit drivers are compatible to the MDIS4 drivers but must not be mixed with MDIS4 drivers at one target system.</li></ul>
<p>
<br>
 <h2><a name="FuncDesc"></a>
Functional Description</h2>
<br>
 <h3><a name="General"></a>
General</h3>
The driver supports the basic watchdog functions (start, stop, trigger and state), reading the carrier board's temperature and monitored Voltage of the DC/DC converters output. The limits for low/high temperature and low/high voltage are set through descriptors, since these need to be set just once usually after deploy of DC1 in the field.<p>
When the first path is opened to the XC02BC device, the HW and the driver are being initialized with default values. Under linux additional delay may occur if its the first open of the SMBus channel. Mind the different SMBus addresses used for linux (0x09) and windows (0x12). This results from the different treatment of SMB addresses under linux and windows: while linux treats the value as raw 7 bit value, the SMB address under windows contains the LSB that encodes if its a read or write access. So the SMB address is shifted left by one bit.<p>
<br>
 <h3><a name="channels"></a>
Logical channels</h3>
The driver provides 4 logical channels from which currently only 2 are used, they represent the 2 possible displays that can be controlled from the XC2. For example, when initial brightness is set, the display for which the brightness is to be set has to be selected first by setting the MDIS channel to 0 or 1.<br>
<p>
<br>
 <h2><a name="api_functions"></a>
Supported API Functions</h2>
<table border="0" cellspacing="3" cellpadding="3">
<tr>
<td><b>API function</b> </td><td><b>Functionality</b> </td><td><b>Corresponding low level function</b><p>
</td></tr>
<tr>
<td><a class="elRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a4">M_open()</a></td><td>Open device </td><td><a class="el" href="xc02__drv_8c.html#a13">XC02_Init()</a> </td></tr>
<tr>
<td><a class="elRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a9">M_close()</a> </td><td>Close device  </td><td><a class="el" href="xc02__drv_8c.html#a14">XC02_Exit()</a>) </td></tr>
<tr>
<td><a class="elRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a13">M_setstat()</a> </td><td>Set device parameter  </td><td><a class="el" href="xc02__drv_8c.html#a17">XC02_SetStat()</a> </td></tr>
<tr>
<td><a class="elRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a12">M_getstat()</a> </td><td>Get device parameter  </td><td><a class="el" href="xc02__drv_8c.html#a18">XC02_GetStat()</a> </td></tr>
<tr>
<td><a class="elRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/m__errstr_8c.html#a1">M_errstringTs()</a> </td><td>Generate error message  </td><td>- </td></tr>
</table>
<p>
<br>
 <h2><a name="descriptor_entries"></a>
Descriptor Entries</h2>
The low-level driver initialization routine decodes the following entries ("keys") in addition to the general descriptor keys:<p>
<table border="0" cellspacing="3" cellpadding="3">
<tr>
<td><b>Descriptor entry</b> </td><td><b>Description</b> </td><td><b>Values</b> </td><td><b>required/optional</b><p>
</td></tr>
<tr>
<td>SMB_BUSNBR </td><td>SMBus bus number </td><td>0, 1, 2, ...<br>
 Default: 0 </td><td>required <p>
</td></tr>
<tr>
<td>SMB_DEVADDR </td><td>SMBus address of the XC02 board controller </td><td>0x00, 0xff<br>
 Default linux: 0x09 windows: 0x12 </td><td>required <p>
</td></tr>
<tr>
<td>WDOG_TOUT </td><td>Watchdog timeout in 100ms units </td><td>1..255 [100ms]<br>
 Default: 255 </td><td>optional  </td></tr>
<tr>
<td>DOWN_DELAY </td><td>Shutdown delay mode </td><td>see <a class="el" href="group____XC02__DOWN__DELAY.html">Shutdown Delay defines</a><br>
 Default: 0 (no delay) </td><td>optional  </td></tr>
<tr>
<td>OFF_DELAY </td><td>Off delay mode </td><td>see <a class="el" href="group____XC02__OFF__DELAY.html">OFF Delay defines</a><br>
 Default: 0 (no delay) </td><td>optional  </td></tr>
<tr>
<td>TEMP_HIGH </td><td>Temperature high limit for display </td><td>Default: 60°C </td><td>optional  </td></tr>
<tr>
<td>TEMP_LOW </td><td>Temperature low limit for display </td><td>Default: -10°C </td><td>optional  </td></tr>
<tr>
<td>VOLT_HIGH </td><td>display supply high voltage monitoring limit<br>
 before display switch off </td><td>Default: 14 V </td><td>optional  </td></tr>
<tr>
<td>VOLT_LOW </td><td>display supply low voltage monitoring limit<br>
 before display switch off </td><td>Default: 10V </td><td>optional  </td></tr>
<tr>
<td>BRIGHT_SOURCE </td><td>display brightness control source <br>
 before display switch off </td><td>0: use value passed by SetStat XC02_BRIGHTNESS<br>
 1: use automatic setting through photoelement (Option)<br>
 Default: 0 </td><td>optional  </td></tr>
<tr>
<td>INIT_DISPSTAT </td><td>initial display status after powerup <br>
  </td><td>0: display 1 off, display 2 (optional) off<br>
 1: display 1 on, display 2 (optional) off<br>
 2: display 1 off, display 2 (optional) on<br>
 3: display 1 on, display 2 (optional) on<br>
 Default: 1 </td><td>optional  </td></tr>
<tr>
<td>INIT_BRIGHT_1 </td><td>initial brightness of display 1 on powerup </td><td>Default: 100 (50%) Attention: 0=most bright, 200=most dark </td><td>optional  </td></tr>
<tr>
<td>INIT_BRIGHT_2 </td><td>initial brightness of optional display 2 on powerup<br>
  </td><td>Default: 100 (50%) Attention: 0=most bright, 200=most dark </td><td>optional  </td></tr>
</table>
<p>
<dl compact><dt><b>Attention:</b></dt><dd>changes made in the descriptors occur after next power cycle. The brightness values given above are in the range of 0 to 200, where 0 represents the most bright setting and 200 the most dark, dimmed setting.</dd></dl>
<br>
 <h2><a name="codes"></a>
XC02 board controller specific GetStat/SetStat codes</h2>
For the watchdog functionality, the driver supports a subset of the WDOG GetStat/SetStat codes (defined in <a class="el" href="wdog_8h.html">wdog.h</a>):<ul>
<li><a class="el" href="wdog_8h.html#a1">WDOG_START</a></li><li><a class="el" href="wdog_8h.html#a3">WDOG_STOP</a></li><li><a class="el" href="wdog_8h.html#a2">WDOG_TRIG</a></li><li><a class="el" href="wdog_8h.html#a5">WDOG_STATUS</a><br>
</li></ul>
<p>
The other driver functionality is supported by the XC02 GetStat/SetStat codes. See <a class="el" href="xc02__drv_8h.html#getstat_setstat_codes">section about XC02 GetStat/SetStat codes</a>.<p>
<br>
 <h2><a name="programs"></a>
Overview of provided programs</h2>
<h3><a name="xc02_ctrl"></a>
example for setting various parameters of the driver</h3>
<a class="el" href="xc02__ctrl_8c.html">xc02_ctrl.c</a> (see example section)<h3><a name="xc02_simp"></a>
simple example for driver usage</h3>
switches the display off and on and displays a brightness ramp from minimum to maximum brightness. <br>
 <a class="el" href="xc02__simp_8c.html">xc02_simp.c</a> (see example section), 
	</div>
</div>

<div class="footer">
<!-- Footer -->
	<p class="footer">
	Generated for XC2 (DC1 carrier board) board controller driver using <a href="http://www.doxygen.org">doxygen</a>. All Rights Reserved.
	</p>
</div>

</body>
</html>

